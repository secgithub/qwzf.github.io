$.fn.popImg=function(){function h(t){var i=$(window).width(),o=$(window).height();t.css("cursor","zoom-out").attr("data-b-img",1);var e=new Image;e.onload=function(){t.stop().animate({width:this.width,height:this.height,left:(i-this.width)/2,top:(o-this.height)/2},300)},e.src=t.attr("src")}var r=$("<div/>").css({position:"fixed",left:0,right:0,top:0,bottom:0,height:"100%",width:"100%",zIndex:9999999,background:"#000",opacity:"0.6",display:"none"}).attr("data-id","b_layer");this.each(function(){$(this).css("cursor","zoom-in").on("click",function(){var t=$("body");r.appendTo(t),r.fadeIn(300);var i,o,e,a,n,d=(i=$(this),o=i.offset().left,e=i.offset().top,a=i.width(),n=i.height(),i.clone().css({position:"fixed",width:a,height:n,left:o,top:e,zIndex:1e7}));d.appendTo(t),h(d)})});var i=null;$(window).on("resize",function(){$("img[data-b-img]").each(function(){var t=$(this);i&&clearTimeout(i),i=setTimeout(function(){h(t)},10)})}),$(window).on("click keydown",function(t){"keydown"==t.type&&27===t.keyCode&&(r.fadeOut(300),$("img[data-b-img]").remove());var i=$(t.target);"b_layer"!=i.attr("data-id")&&1!=i.attr("data-b-img")||(r.fadeOut(300),$("img[data-b-img]").remove())})};