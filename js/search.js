function initSearch(){var s,t=$("#keywords"),e=($("#back"),$("#search-container")),n=$("#search-result"),r=$("#search-tpl").html(),o="/content.json?v="+ +new Date;function a(t){var e="";e=t.length?t.map(function(t){return e=r,n={title:t.title,url:window.mihoConfig.root+"/"+t.path},e.replace(/\{\w+\}/g,function(t){var e=t.replace(/\{|\}/g,"");return n[e]||""});var e,n}).join(""):'<li class="search-result-item-tips"><p>No Result found!</p></li>',n.html(e),i(!0)}function i(t){t?e.addClass("search-container-show"):e.removeClass("search-container-show")}t.bind("input propertychange",function(t){var n=this.value.trim().toLowerCase();n?(function(e){if(s)e(s);else{var t=new XMLHttpRequest;t.open("GET",o,!0),t.onload=function(){if(200<=this.status&&this.status<300){var t=JSON.parse(this.response||this.responseText);s=t instanceof Array?t:t.posts,e(s)}else console.error(this.statusText)},t.onerror=function(){console.error(this.statusText)},t.send()}}(function(t){var e=[];t.forEach(function(t){(-1<t.title.toLowerCase().indexOf(n)||-1<t.text.toLowerCase().indexOf(n))&&e.push(t)}),a(e)}),t.preventDefault()):i(!1)})}