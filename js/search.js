var searchAll,searchFunc=function(e,a,l){"use strict";$.ajax({url:e,dataType:"xml",complete:function(e){var t=$("entry",function(e){if(document.all){var t=new ActiveXObject("Microsoft.XMLDOM");return t.loadXML(e),t}return(new DOMParser).parseFromString(e,"text/xml")}(e.responseText)).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),r=(document.getElementById(a),document.getElementById(l));searchAll=function(e){var f='<ul class="search-result-list">',v=e.trim().toLowerCase().trim().split(/[\s\-]+/);if(r.innerHTML="",!(e.trim().length<=0)){if(t.forEach(function(e){var r=!0;e.title&&""!==e.title.trim()||(e.title="Untitled");var a=e.title.trim().toLowerCase(),l=e.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),t=e.url,s=-1,n=-1,o=-1;if(""!==l?v.forEach(function(e,t){s=a.indexOf(e),n=l.indexOf(e),s<0&&n<0?r=!1:(n<0&&(n=0),0==t&&(o=n))}):r=!1,r){var i=t.split("/"),c=i[1]+"/"+i[2]+"/"+i[3];f+="<li><a href='"+t+"'><span class='post-title' title='"+a+"'>"+a+"</span><span class='post-date' title='"+c+"'>"+c+"</span></a>";var u=e.content.trim().replace(/<[^>]+>/g,"");if(0<=o){var h=o-20,m=o+80;h<0&&(h=0),0==h&&(m=100),m>u.length&&(m=u.length);var p=u.substr(h,m);v.forEach(function(e){var t=new RegExp(e,"gi");p=p.replace(t,'<em class="search-keyword">'+e+"</em>")}),f+='<p class="search-result">'+p+"...</p>"}f+="</li>"}}),-1===(f+="</ul>").indexOf("<li>"))return r.innerHTML="<ul><span class='local-search-empty'>没有找到内容，更换下搜索词试试吧~<span></ul>";r.innerHTML=f,$(document).pjax("#local-search-result a",".pjax",{fragment:".pjax",timeout:8e3}),$("#local-search-result a").mouseenter(function(e){$("#local-search-result a.hover").removeClass("hover"),$(this).addClass("hover")}),$("#local-search-result a").mouseleave(function(e){$(this).removeClass("hover")})}}},error:function(e,t,r){console.log("文章中出现特殊字符，导致解析xml出现问题，系统自动采用第二方案：进行主动解析！！！ 请检查全文搜索是否有问题，如出现问题，请及时在 https://github.com/yelog/hexo-theme-3-hexo/issues 中提出来，作者会尽快处理！")}})};